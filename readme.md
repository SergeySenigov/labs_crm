
**Задание программисту БД**

Создать в рабочей схеме базы данных таблицы  (или дополнить существующие) для сущностей с полями, описанными ниже

Сущность “ЗаявкаПосетителя” (`client_request`).

Поля: 

|Информация|Поле в БД|Тип|Ограничения|
|----------|---------|---------|---------|
|Код контрагента|contractor_id|int4|-|
|ФИО|fio|varchar(40)|-|
|Телефон|phone|varchar(12)|not null|
|ИНН|inn|varchar(12)|-|
|Время создания|create_dt|timestamp|not null|


Сущность “Контрагент” (`contractor_info`).

Поля: 

|Информация|Поле в БД|Тип|Ограничения|
|----------|---------|---------|---------|
|Код контрагента|contractor_id|int4|-|
|Время создания|create_dt|timestamp|not null|
|Полное наименование|longName|varchar(12)|-|
|ИНН|inn|varchar(12)|not null|
|КПП|kpp|varchar(12)|not null|
|Юридический адрес|legalAddress|varchar|-|

Сущность “Учредители контрагента” (`contractor_founders`).

Поля: 

|Информация|Поле в БД|Тип|Ограничения|
|----------|---------|---------|---------|
|Код контрагента|contractor_id|int4|-|
|Тип учредителя|founder_type|varchar(3)|-|
|ФИО ФЛ|fio|varchar|-|
|ИНН ФЛ|fl_inn|varchar(12)|-|
|Имя организации|org_name|varchar|-|
|ИНН ЮЛ|org_inn(12)|varchar|-|
|ОРГН|ogrn|varchar(20)|-|
|Страна|country|varchar(50)|-|
|Сумма|share|numeric(14,2)|-|
|Дата внесения|dt|date|-|


**Задание программисту cайта**

Создать на сайте форму для ввода и отправки следующей информации:

ФИО, номер телефона, ИНН 

|Поле|Размер|Тип|Проверка|Параметр|
|----------|---------|-----|---|-|
|ФИО|40 символов|Текст|не пустое, только буквенные символы, пробелы, дефис|fio|
|Телефон|12 символов|Текст|не пустое, формат 89999999999 или +79999999999|phone|
|ИНН|12 символов|Текст|пусто или цифровые символы без пробелов|inn|

Предусмотреть кнопку отправки.

Кнопка отправки должна быть неактивна, пока не проверены значения в полях ФИО, Телефон согласно полям Проверка, Формат.

При несоотвестствии проверкам выводить рядом с полем сообщения о типе несоответствия.

Форма должна отправлять данные методом POST в адрес https://web.crm-labs.ru/client_request/new, используя названия полей из поля Параметр таблицы.


**Задание программисту инфраструктуры**

При поступлении запроса по маршруту "client_request/new", помесить в очередь сообщений `crm_activity` новое сообщение с темой `client_request_new` и данными:
|Поле сообщения|Данные|
|----------|---------|
|fio|Из поля запроса fio|
|phone|Из поля запроса phone|
|inn|Из поля запроса inn|
|dt|Текущая дата, время|


**Задание программисту бизнес-логики CRM**

 При появлении в очереди сообщений `crm_activity` сообщения с темой `client_request_new`:
 1. Создать в БД CRM новую сущность “ЗаявкаПосетителя” (`client_request`).
 Поля взять из сообщения:

 |Поле БД|Поле сообщения|
|----------|---------|
|fio|fio|
|phone|phone|
|inn|inn|
|dt|dt|

 2. Проверить ИНН

 3. Создать в БД CRM новую сущность “Контрагент” (`contractor_info`).